# Piper general purpose pipeline
# This pipeline was generated by Hyperspace Onboarding
# To modify the pipeline or add additional steps please check:
# https://github.wdf.sap.corp/pages/ContinuousDelivery/piper-doc/stages/
general:
  buildTool: 'golang'
  productiveBranch: 'main'

  repository: &REPOSITORY_NAME 'controller-utils'
  owner: 'CoLa'
  githubApiUrl: 'https://github.tools.sap/api/v3'
  githubServerUrl: 'https://github.tools.sap'
  privateModules: 'github.tools.sap/*'

  vaultPath: 'piper/PIPELINE-GROUP-5266'
  vaultBasePath: 'piper/PIPELINE-GROUP-5266'
  vaultPipelineName: 'PIPELINE-37565'
  vaultServerUrl: 'https://vault.tools.sap'
  vaultNamespace: 'ies/hyperspace/pipelines'

stages:
  Build:
    sapCallStagingService: false
    golangBuild: false
  Release:
    sapDownloadArtifact: false
    githubPublishRelease: true
  Promote:
    sapCallStagingService: false

steps:
  artifactPrepareVersion:
    versioningType: library
    gitHttpsCredentialVaultSecretName: 'GROUP-SECRETS/github-cola-serviceuser'
  githubPublishRelease:
    addDeltaToLastRelease: true
    addClosedIssues: true
  sapCumulusUpload:
    pipelineId: 664a1dfa-5bf2-4545-93b6-774203d7ded0
  checkmarxExecuteScan:
    projectName: *REPOSITORY_NAME
    vulnerabilityThresholdEnabled: false
    teamName: '/CxServer/SP/SAP/BUSINESS_TECHNOLOGY_PLATFORM/COMPONENTS/CLOUD_ORCHESTRATION'
    filterPattern: '**/*.go, !**/*_test.go, !**/vendor/**, !**/test/**, !**/hack/**, !api/**, !**/zz_*.go, !**/*.yml, !**/*.yaml'
    preset: 100099 # SAP_Default_Go
